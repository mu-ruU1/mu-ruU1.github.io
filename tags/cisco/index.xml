<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>cisco on Yuuのブログ</title><link>https://takag.me/tags/cisco/</link><description>Recent content in cisco on Yuuのブログ</description><generator>Hugo -- gohugo.io</generator><language>ja</language><lastBuildDate>Thu, 29 Dec 2022 01:39:19 +0900</lastBuildDate><atom:link href="https://takag.me/tags/cisco/index.xml" rel="self" type="application/rss+xml"/><item><title>ファイアウォールが原因でpingが通らなかった</title><link>https://takag.me/p/%E3%83%95%E3%82%A1%E3%82%A4%E3%82%A2%E3%82%A6%E3%82%A9%E3%83%BC%E3%83%AB%E3%81%8C%E5%8E%9F%E5%9B%A0%E3%81%A7ping%E3%81%8C%E9%80%9A%E3%82%89%E3%81%AA%E3%81%8B%E3%81%A3%E3%81%9F/</link><pubDate>Thu, 29 Dec 2022 01:39:19 +0900</pubDate><guid>https://takag.me/p/%E3%83%95%E3%82%A1%E3%82%A4%E3%82%A2%E3%82%A6%E3%82%A9%E3%83%BC%E3%83%AB%E3%81%8C%E5%8E%9F%E5%9B%A0%E3%81%A7ping%E3%81%8C%E9%80%9A%E3%82%89%E3%81%AA%E3%81%8B%E3%81%A3%E3%81%9F/</guid><description>&lt;img src="https://takag.me/img/2022/12-29/cisco-891f.jpg" alt="Featured image of post ファイアウォールが原因でpingが通らなかった" />&lt;h2 id="はじめに">はじめに&lt;/h2>
&lt;p>ネットワークの勉強のために 7 月頃に Cisco891F を買ったけれども、色々忙しくて全く触れていませんでした。
冬休みになって時間ができたのでこれから勉強していきたいと思います。&lt;/p>
&lt;h2 id="事の発端">事の発端&lt;/h2>
&lt;p>手始めに Cisco891F x 3 を使って&lt;a class="link" href="https://github.com/mu-ruU1/network-study/tree/main/vlan/svi" target="_blank" rel="noopener"
>SVI を利用した VLAN 間ルーティング&lt;/a>を試していたところ特定の条件で ping が通らないことが起こりました。&lt;br>
具体的には、同一 VLAN では ping が通るが異なる VLAN 間では ping が通らないといった状態です。&lt;/p>
&lt;h2 id="内容">内容&lt;/h2>
&lt;p>VLAN10(172.16.10.0/24)に所属している PC から VLAN20(172.16.20.0/24)に所属している PC に ping を実行したときの結果が以下のようになりました。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-powershell" data-lang="powershell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">PS &lt;/span>&lt;span class="n">C:&lt;/span>&lt;span class="p">\&lt;/span>&lt;span class="n">Users&lt;/span>&lt;span class="p">\&lt;/span>&lt;span class="n">user&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="n">ping&lt;/span> &lt;span class="mf">172.16&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="py">20&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="py">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">172.16&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="py">20&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="py">1&lt;/span> &lt;span class="err">に&lt;/span> &lt;span class="n">ping&lt;/span> &lt;span class="err">を送信しています&lt;/span> &lt;span class="mf">32&lt;/span> &lt;span class="err">バイトのデータ:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">要求がタイムアウトしました。&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">要求がタイムアウトしました。&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">要求がタイムアウトしました。&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>tracert を実行したときの結果も載せておきます。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-powershell" data-lang="powershell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">PS &lt;/span>&lt;span class="n">C:&lt;/span>&lt;span class="p">\&lt;/span>&lt;span class="n">Users&lt;/span>&lt;span class="p">\&lt;/span>&lt;span class="n">user&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="n">tracert&lt;/span> &lt;span class="mf">172.16&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="py">20&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="py">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">172.16&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="py">20&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="py">1&lt;/span> &lt;span class="err">へのルートをトレースしています。経由するホップ数は最大&lt;/span> &lt;span class="mf">30&lt;/span> &lt;span class="err">です&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">1&lt;/span> &lt;span class="mf">1&lt;/span> &lt;span class="n">ms&lt;/span> &lt;span class="mf">1&lt;/span> &lt;span class="n">ms&lt;/span> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="mf">1&lt;/span> &lt;span class="n">ms&lt;/span> &lt;span class="mf">172.16&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="py">10&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="py">254&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">2&lt;/span> &lt;span class="p">*&lt;/span> &lt;span class="p">*&lt;/span> &lt;span class="p">*&lt;/span> &lt;span class="err">要求がタイムアウトしました。&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">3&lt;/span> &lt;span class="p">*&lt;/span> &lt;span class="p">*&lt;/span> &lt;span class="p">*&lt;/span> &lt;span class="err">要求がタイムアウトしました。&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">4&lt;/span> &lt;span class="p">*&lt;/span> &lt;span class="p">*&lt;/span> &lt;span class="p">*&lt;/span> &lt;span class="err">要求がタイムアウトしました。&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ルーターからはすべての SVI のデフォルトゲートウェイ・PC に ping が通るので PC 側に問題があると思って調べました。&lt;/p>
&lt;h2 id="解決策">解決策&lt;/h2>
&lt;p>ファイアウォールのプロパティを見たところ、リモート IP アドレスが&lt;code>ローカル サブサブネット&lt;/code>になっていたことが原因だったことが判明しました。&lt;br>
という訳で、リモート IP アドレスを&lt;code>任意のIPアドレス&lt;/code>にすれば ping が通るようになります。&lt;/p>
&lt;p>&lt;img src="https://takag.me/img/2022/12-29/firewall.png"
loading="lazy"
>&lt;/p></description></item></channel></rss>